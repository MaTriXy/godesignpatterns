<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="google-site-verification" content="VqGny1x9EAeoXjY8v2hWFZGBUZFNQnavIOXVkY50mdk" />
    <meta name="msvalidate.01" content="AFECEF07C08280E3BFA946DDCE26B76C" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@alexjlockwood" />
    <meta name="twitter:creator" content="@alexjlockwood" />
    <meta name="twitter:domain" content="" />
    
    <!-- Don't include normal description meta tag for now. Only include twitter:description since it is explicitly required. -->
    <meta name="twitter:description" content="Android Design Patterns is a website for developers who wish to better understand the Android application framework. The tutorials here emphasize proper code design and project maintainability." />
    
    <meta property="og:locale" content="en_US" />
    <meta property="og:title" content="Content Providers &amp; Content Resolvers" />
    
    <meta property="og:type" content="article" />
    <meta property="article:published_time" content="2012-06-25T00:00:00-04:00" />
    <meta property="article:modified_time" content="2012-06-25T00:00:00-04:00" />
    
    <meta property="og:url" content="/2012/06/content-resolvers-and-content-providers.html" />
    <meta property="og:site_name" content="Android Design Patterns" />
    
    <meta property="og:image" content="/assets/images/favicon.jpg" />
    <title>Content Providers &amp; Content Resolvers | Android Design Patterns</title>
    <link rel="canonical" href="/2012/06/content-resolvers-and-content-providers.html" />
    <link rel="icon" href="/assets/images/favicon.jpg" type="image/x-icon">
    <link href="/feed.atom" rel="alternate" title="Android Design Patterns - Feed" type="application/atom+xml" />
    <link rel="stylesheet" type="text/css" href="/css/all.css" />

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
  </head>

  <body>
    <div id="header">
      <div class="container">
        <h3 id="blog-header"><a href="/">Android Design Patterns</a></h3>
        <nav class="pull-right">
          <a href="/archives/">Archives</a>
          <a href="/about/">About</a>
        </nav>
      </div>
    </div>

    <div id="social" class="container">
      <a href="https://plus.google.com/100751609891157863386?rel=author" class="googleplus"><i class="icon-gplus"></i></a>
      <a href="https://twitter.com/alexjlockwood" class="twitter"><i class="icon-twitter"></i></a>
      <a href="https://github.com/alexjlockwood" class="github"><i class="icon-github-circled"></i></a>
      <a href="/feed.atom" class="rss"><i class="icon-rss"></i></a>
    </div>

    <div class="main container">
      <div id="content">
	<div class="blog-index">
          <div itemscope itemtype="http://schema.org/BlogPosting" class="post">
  <header><h1 itemprop="name">Content Providers &amp; Content Resolvers</h1></header>

  <div class="side">
    <div class="date-posted" >
      Posted <span itemprop="datePublished" content="2012-06-25T00:00:00-04:00" class="date">Jun 25, 2012</span>
      <div class="author">by <a href="https://google.com/+AlexLockwood"><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Alex Lockwood</span></span></a></div>
    </div>

    <div class="share-buttons">
      <div class="g-plusone" data-size="medium"></div>
      <div class="tweet"><a href="https://twitter.com/share" class="twitter-share-button" data-via="alexjlockwood" data-lang="en">Tweet</a></div>
      <div class="fb-like" data-href="/2012/06/content-resolvers-and-content-providers.html" data-layout="button_count" data-action="like" data-show-faces="true" data-share="false"></div>
    </div>
  </div>

  <div class="body">
    <div itemprop="articleBody">
      <p>Content Providers and Content Resolvers are a common source of confusion for beginning
Android developers. Further, online tutorials and sample code are not sufficient in
describing how the two classes work together to provide access to the Android data
model. This post hopes to fill in this gap by explaining their place in the
<code>android.content</code> package. It concludes with a walk through the life of a
simple query to the Content Resolver.</p>

<!--more-->

<h3>The <code>android.content</code> Package</h3>

<p>The <a href="http://developer.android.com/reference/android/content/package-summary.html"><code>android.content</code></a>
package contains classes for accessing and publishing data. The Android framework
enforces a <strong>robust</strong> and <strong>secure</strong> data sharing model. Applications are <em>not</em>
allowed direct access to other application&#39;s internal data. Two classes in the
package help enforce this requirement: the <code>ContentResolver</code> and the <code>ContentProvider</code>.</p>

<h3>What is the Content Resolver?</h3>

<p>The Content Resolver is the single, global instance in your application that provides
access to your (and other applications&#39;) content providers. The Content Resolver
behaves exactly as its name implies: it accepts requests from clients, and <em>resolves</em>
these requests by directing them to the content provider with a distinct authority.
To do this, the Content Resolver stores a mapping from authorities to Content Providers.
This design is important, as it allows a simple and secure means of accessing other
applications&#39; Content Providers.</p>

<p>The Content Resolver includes the CRUD (create, read, update, delete) methods corresponding
to the abstract methods (insert, delete, query, update) in the Content Provider class.
The Content Resolver does not know the implementation of the Content Providers it is
interacting with (nor does it need to know); each method is passed an URI that specifies
the Content Provider to interact with.</p>

<h3>What is a Content Provider?</h3>

<p>Whereas the Content Resolver provides an abstraction from the application&#39;s Content Providers,
Content Providers provides an abstraction from the underlying data source
(i.e. a SQLite database). They provide mechanisms for defining data security (i.e. by
enforcing read/write permissions) and offer a standard interface that connects data
in one process with code running in another process.</p>

<p>Content Providers provide an interface for publishing and consuming data, based around a
simple URI addressing model using the <code>content://</code> schema. They enable you to decouple
your application layers from the underlying data layers, making your application
data-source agnostic by abstracting the underlying data source.</p>

<h3>The Life of a Query</h3>

<p>So what exactly is the step-by-step process behind a simple query? As described above,
when you query data from your database via the content provider, you don&#39;t communicate
with the provider directly. Instead, you use the Content Resolver object to communicate
with the provider. The specific sequence of events that occurs when a query is made
is given below:</p>

<ol>
<li>A call to <code>getContentResolver().query(Uri, String, String, String, String)</code> is made. 
 The call invokes the Content Resolver&#39;s <code>query</code> method, <em>not</em> the <code>ContentProvider</code>&#39;s.</li>
<li>When the <code>query</code> method is invoked, the Content Resolver parses the <code>uri</code> argument 
 and extracts its authority.</li>
<li>The Content Resolver directs the request to the content provider registered with the
 (unique) authority. This is done by calling the Content Provider&#39;s <code>query</code> method.</li>
<li>When the Content Provider&#39;s <code>query</code> method is invoked, the query is performed and
 a Cursor is returned (or an exception is thrown). The resulting behavior depends
 entirely on the Content Provider&#39;s implementation.</li>
</ol>

<h3>Conclusion</h3>

<p>An integral part of the 
<a href="http://developer.android.com/reference/android/content/package-summary.html"><code>android.content</code></a>
package, the <code>ContentResolver</code> and <code>ContentProvider</code> classes work together to
ensure secure access to other applications&#39; data. Understanding how the underlying
system works becomes second nature once you&#39;ve written enough Android code, but I
hope that someone finds this explanation helpful some day.</p>

<p>Let me know if you have any questions about the process!</p>

    </div>
    
    <div class="post-pagination">
      
      <div class="prev"><a rel="prev" href="/2012/06/app-force-close-honeycomb-ics.html">Older &#187;</a></div>
      
      
      <div class="next"><a rel="next" href="/2012/07/loaders-and-loadermanager-background.html">&#171; Newer</a></div>
      
    </div>

    <div id="responsive-post-bottom-ad">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-3588752900040136"
           data-ad-slot="6089694851"
           data-ad-format="auto"></ins>
      <script>
	(adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
    
    <div class="post-comments">
      <div id="disqus_thread"></div>
      <script src="/scripts/disqus-lazy-load.js"></script>
    </div>
    
  </div>

  
</div>

<!-- Tweet button javascript -->
<script>!function(e,a,f){var c,b=e.getElementsByTagName(a)[0];if(!e.getElementById(f)){c=e.createElement(a);c.id=f;c.src="https://platform.twitter.com/widgets.js";b.parentNode.insertBefore(c,b)}}(document,"script","twitter-wjs");</script>

<!-- Like button javascript -->
<div id="fb-root"></div><script>(function(e,a,f){var c,b=e.getElementsByTagName(a)[0];if(e.getElementById(f)){return}c=e.createElement(a);c.id=f;c.src="//connect.facebook.net/en_US/all.js#xfbml=1";b.parentNode.insertBefore(c,b)}(document,"script","facebook-jssdk"));</script>

	</div>
      </div>

      <div id="info" class="cf">
	<div class="right">
          <div class="box">
            <h3>About this Blog</h3>
            <p>Android Design Patterns is a website for developers who wish to better understand the Android application framework. The tutorials here emphasize proper code design and project maintainability.</p>
            <div class="g-plusone" data-annotation="inline" data-width="300" data-href=""></div>
          </div>
          <div class="box">
            <h3>Find a typo?</h3>
            <p>Submit a pull request! The code powering this site is open-source and available on <a href="https://github.com/alexjlockwood/alexjlockwood.github.io">GitHub</a>. Corrections are appreciated and encouraged! Click <a href="https://github.com/alexjlockwood/alexjlockwood.github.io/blob/master/README.md#find-a-typo">here</a> for instructions.</p>
          </div>
	</div>
	<div class="box gbadge">
          <div class="g-person" data-href="//plus.google.com/+AlexLockwood" data-rel="author"></div>
	</div>
      </div>
    </div>

    <div id="responsive-home-page-bottom-ad" class="container">
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-3588752900040136"
           data-ad-slot="3555030858"
           data-ad-format="auto"></ins>
      <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>

    <div id="copyright" class="container">
      <p>&copy; 2012-2014 Android Design Patterns</p>
    </div>

    <script type="text/javascript">
      (function(){var a=document.createElement("script");
      a.type="text/javascript";a.async=true;a.src="https://apis.google.com/js/platform.js";
      var b=document.getElementsByTagName("script")[0];
      b.parentNode.insertBefore(a,b)})();
    </script>

  </body>
</html>
